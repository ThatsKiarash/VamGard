@model List<Loan>
@{
    var loanType = ViewBag.LoanType as LoanType;
    ViewData["Title"] = $"{loanType?.Name} - مقایسه {loanType?.Name} بانک‌های مختلف";
    ViewData["MetaDescription"] = $"لیست کامل {loanType?.Name} بانک‌های مختلف ایران. مقایسه نرخ سود، مبلغ و شرایط دریافت {loanType?.Name}. اطلاعات به‌روز.";
    ViewData["MetaKeywords"] = $"{loanType?.Name}, مقایسه {loanType?.Name}, نرخ سود {loanType?.Name}, شرایط {loanType?.Name}, بانک";
    ViewData["CanonicalUrl"] = $"https://vamgard.org/type/{loanType?.Slug}";
}

<div class="container" style="padding-top:2rem;padding-bottom:3rem;">
    <nav aria-label="breadcrumb" class="mb-3">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a asp-controller="Home" asp-action="Index">خانه</a></li>
            <li class="breadcrumb-item"><a asp-controller="Loans" asp-action="Index">وام‌ها</a></li>
            <li class="breadcrumb-item active">@loanType?.Name</li>
        </ol>
    </nav>

    <div class="d-flex align-items-center gap-3 mb-4">
        <div class="type-icon" style="width:56px;height:56px;border-radius:14px;background:var(--blue-glow);display:flex;align-items:center;justify-content:center;font-size:1.5rem;color:var(--blue);">
            <i class="bi @(loanType?.IconClass ?? "bi-cash-coin")"></i>
        </div>
        <div>
            <h1 style="font-weight:800;font-size:1.6rem;margin:0;">@loanType?.Name</h1>
            @if (!string.IsNullOrEmpty(loanType?.Description))
            {
                <p style="color:var(--text-muted);margin:0;">@loanType.Description</p>
            }
        </div>
    </div>

    <p style="color:var(--text-muted);font-size:.88rem;"><strong>@Model.Count</strong> وام یافت شد</p>

    @if (!Model.Any())
    {
        <div class="text-center py-5">
            <i class="bi bi-inbox" style="font-size:4rem;color:var(--slate-light);"></i>
            <p class="mt-3" style="color:var(--text-muted);">در حال حاضر وامی در این دسته‌بندی ثبت نشده.</p>
        </div>
    }
    else
    {
        <div class="row g-4">
            @foreach (var loan in Model)
            {
                <div class="col-md-6 col-lg-4">
                    @await Html.PartialAsync("_LoanCard", loan)
                </div>
            }
        </div>
    }
</div>

<script type="application/ld+json">
{
    "@@context": "https://schema.org",
    "@@type": "CollectionPage",
    "name": "@loanType?.Name",
    "description": "@loanType?.Description",
    "url": "https://vamgard.org/type/@loanType?.Slug",
    "isPartOf": { "@@type": "WebSite", "name": "وام‌گرد", "url": "https://vamgard.org" },
    "numberOfItems": @Model.Count
}
</script>
<script type="application/ld+json">
{
    "@@context": "https://schema.org",
    "@@type": "BreadcrumbList",
    "itemListElement": [
        { "@@type": "ListItem", "position": 1, "name": "خانه", "item": "https://vamgard.org/" },
        { "@@type": "ListItem", "position": 2, "name": "وام‌ها", "item": "https://vamgard.org/Loans" },
        { "@@type": "ListItem", "position": 3, "name": "@loanType?.Name", "item": "https://vamgard.org/type/@loanType?.Slug" }
    ]
}
</script>
